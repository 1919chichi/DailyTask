# AutoDingDing

Kotlin+Java混编实现的钉钉打卡小工具，解决您上班途中迟到问题，只需一部备用手机置于公司工位，设置一下上下班打卡时间即可。  
相比于之前的版本，此版本做了版本兼容，最低兼容 6.0（本人测试机版本），最高兼容到Android 14（本人手机版本）或者鸿蒙
3.0系统。 此应用最开始的本意是方便自己，但后来本人换了新的单位，此款工具软件也就不用了，所以选择开源，
有不到之处还请谅解。本应用仅限学习和内部使用，严禁商用和用作其他非法用途，如有违反，与本人无关！！！  
本应用的出发点是为了解决上班路途遥远，或者每天卡点上班族的燃眉之急，出发点自认为是友好的，但是，不可滥用！！！

# 说几句（最新版本 1.4.7.1）- 更新时间：2024年7月13日12:14:39

本不想多说什么的，奈何总有人问，那我就给你们问的人统一回复下！

1. 开篇我就说过了，我早已经换了单位，这个软件已经用不上了，以后估计很少会更新版本或者不会更新版本了，有能力的可以自行下载源码修改。
2. 总有人提自己把锁屏功能关掉，弄个定时闹钟，到点的时候亮屏，再隔一分钟就能自动打卡。你们说的这些我都考虑过，也都尝试过。 非系统级别应用调用系统AlarmManager会出现不能精准唤醒的问题（这里涉及到PowerManager和CPU唤醒机制），这样会导致迟到，一个月迟到个几次，你们能接受吗？
3. 监听微信或者QQ消息（已实现，但是灭屏后概率收不到消息，这与系统以及推送送达率有关），监听电话或者短信（必须要电话卡），监听系统闹钟（高版本无法监听）我都试过。
4. 以上种种或多或少的都会出现不能按时打卡导致迟到的问题，目前的方式虽然是最笨的，但却是最稳妥的。
5. 另外，手机灭屏了，关机了可能都不知道，还谈什么打卡？如果觉得亮屏耗电严重，把手机亮度调最低不就行了？
6. 最近不知道是本软件用户多了被钉钉注意到了，还是钉钉的检测机制变了，总会被检测到作弊，越来越难维护和开发，如果哪一天真的G了，大伙那就好聚好散，天涯再见~~~

# 注意！！！

#### [被检测到作弊的，用此版本（Android 6+）(AUTO_20240713_1.4.7.1.apk)](apk/auto/release/AUTO_20240713_1.4.7.1.apk)

1. 新增Q&A界面，方便用户使用
2. 新增邮件类型，用户可以选择依旧接收文本形式的邮件，也可选择打卡结果的截屏邮件
3. 考虑到有不少用户钉钉打卡结果被管理关了，所以，添加自动截屏功能，添加发送打卡结果附件邮件功能（一定要开无障碍服务，否则无法截屏！）

#### 收不到邮件的问题：

1. 把工具进程杀掉，然后重启工具并关闭工具的通知监听，最后再重新打开工具的通知监听。随便发条消息到手机，如果能在工具的”所有通知“找到刚刚发的消息，则表示可以正常监听通知，否则重复刚刚的操作。
2. 1.4.7以前的版本如果依旧收不到邮件，那抱歉，你遇到了最坏的一种情况——钉钉普通通知能收到，但是收不到打卡通知的，那可能是你们公司管理员把打卡通知开关给关了。
   遇到这种情况的，就别挣扎了，老老实实手动打卡吧，或者依旧用此工具，只是收不到邮件罢了，每天有点胆颤心惊担心没打上卡而已，问题也不是很大~~

#### 其他问题：

1. 新版本不会被检测到作弊，另外，有个猜测，被检测到作弊的人，是否每天都不修改打卡时间，总是同一个时间点打卡？会不会与此有关？

#### 如果还有问题，请加QQ群：560354109

#### 历史版本看这里：

| APK                                                            | 版本说明                                                                        |
|:---------------------------------------------------------------|:----------------------------------------------------------------------------|
| [app-release.apk](apk/history/app-release.apk)                 | 初始版本，可能会被检测作弊                                                               |
| [AUTO_20240604_1.4.2.apk](apk/history/AUTO_20240604_1.4.2.apk) | 忘了                                                                          |
| [AUTO_20240626_1.4.4.apk](apk/history/AUTO_20240626_1.4.4.apk) | 紧急处理1.4.3版本多个打卡任务只会有最后一个任务生效的问题                                             |
| [AUTO_20240702_1.4.5.apk](apk/history/AUTO_20240702_1.4.5.apk) | 1. 优化新增定时任务或者修改定时任务界面效果，方便使用<br/>2. 解决初次启动小概率闪退的问题                          |
| [AUTO_20240705_1.4.6.apk](apk/history/AUTO_20240705_1.4.6.apk) | 1. 新增用户自定义打卡超时时间<br/>2. 适配小屏手机，设置页无法显示全的问题<br/>3.解决1.4.5版本消息监听打开后不停的收到消息的问题 |

# 使用注意事项：

1、请先确认悬浮窗权限已开启，如不开启将Android
10以上系统可能会出现闪退或者仅能打卡一次且没有邮件通知的问题。（找到"自动打卡"软件，打开悬浮窗权限即可）

![Screenshot_2024-03-19-09-02-42-81_fc704e6b13c4fb26bf5e411f75da84f2.jpg](appImage/Screenshot_2024-03-19-09-02-42-81_fc704e6b13c4fb26bf5e411f75da84f2.jpg)

2、请先确认好通知栏监听已开启，如不开启将无法监听打卡成功的通知。（"其他设置"
可以直接跳转到系统通知监听页面，打开开关就好了。放心，不会有其他窃密小动作），然后设置钉钉设置为“极速打卡”。

![Screenshot_2024-03-19-09-03-02-56_fc704e6b13c4fb26bf5e411f75da84f2.jpg](appImage/Screenshot_2024-03-19-09-03-02-56_fc704e6b13c4fb26bf5e411f75da84f2.jpg)

3、如果想通过QQ或者微信唤起钉钉打卡，需要设置如下图：

![Screenshot_2024-05-02-11-29-45-45_e6871cd13ad370b30dca80a8c4050ac0.jpg](appImage/Screenshot_2024-05-02-11-29-45-45_e6871cd13ad370b30dca80a8c4050ac0.jpg)

如果不需要可以跳过此步骤。

4、设置打卡结果通知邮箱（经自测试，邮箱设置支持QQ邮箱和163邮箱，别的邮箱有需要的可以自行测试）

![Screenshot_2024-03-19-09-03-20-89_28207dbc726d79bfd22d0f80719fc3af.jpg](appImage/Screenshot_2024-03-19-09-03-20-89_28207dbc726d79bfd22d0f80719fc3af.jpg)

好了，基本设置就是这样了，附一张主页面，如下：

![Screenshot_2024-03-19-09-04-16-20_28207dbc726d79bfd22d0f80719fc3af.jpg](appImage/Screenshot_2024-03-19-09-04-16-20_28207dbc726d79bfd22d0f80719fc3af.jpg)
![Screenshot_2024-05-02-11-42-55-86_28207dbc726d79bfd22d0f80719fc3af.jpg](appImage/Screenshot_2024-05-02-11-42-55-86_28207dbc726d79bfd22d0f80719fc3af.jpg)

5、打卡结果如下：

| 打卡结果 | 说明                                                                                  |
|:-----|:------------------------------------------------------------------------------------|
| 成功   | ![打卡成功](appImage/6.png)                                                             |
| 失败   | 1.钉钉账号被自己另一个手机挤下去 <br/> 2.钉钉未设置极速打卡 <br/> 3.钉钉应用内部打卡通知或者手机通知被关闭 <br/> 4.钉钉打卡手机有2个以上 |

最后，在使用本软件之前，最好先自行测试一两天没确认没问题之后再使用，谢谢理解！）
